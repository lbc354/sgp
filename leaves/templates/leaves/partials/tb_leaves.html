{% load static %}
<div class="draggable-table table-responsive">
    <table class="table table-striped table-bordered table-hover">
        <thead class="thead-dark">
            <tr>
                <th class="tb-action" scope="col">Ações</th>
                <th scope="col">Usuário</th>
                <th scope="col">Disponibilidade</th>
                <th scope="col">Próximo afastamento</th>
                <th scope="col">Último afastamento</th>
            </tr>
        </thead>
    
        <tbody>
            {% for obj in page_obj %}
                <tr>
                    <td>
                        <div class="dropdown">
                            <button class="btn" type="button" data-bs-toggle="dropdown" aria-expanded="false"><i class="bi bi-three-dots-vertical"></i></button>
                            <ul class="dropdown-menu">
                                <li>
                                    <a class="dropdown-item" href="{% url 'leaves_active_history' obj.user.id %}">Ver histórico</a>
                                </li>
                            </ul>
                        </div>
                    </td>

                    <td title="{{ obj.user|default_if_none:'' }}">{{ obj.user|default_if_none:'' }}</td>

                    {% if obj.disponivel %}
                        <td class="bg-info-subtle text-info-emphasis" title="Disponível">Disponível</td>
                    {% else %}
                        <td class="bg-warning-subtle text-warning-emphasis" title="{{ obj.disponibilidade }}">{{ obj.disponibilidade }}</td>
                    {% endif %}

                    <td title="{{ obj.proximo_afastamento.data_inicio }} - {{ obj.proximo_afastamento.data_fim }} | {{ obj.proximo_afastamento.descricao }}">
                        {% if obj.proximo_afastamento %}
                            {{ obj.proximo_afastamento.data_inicio }} - {{ obj.proximo_afastamento.data_fim }} | {{ obj.proximo_afastamento.descricao }}
                        {% else %}
                            ---------
                        {% endif %}
                    </td>

                    <td title="{{ obj.ultimo_afastamento.data_inicio }} - {{ obj.ultimo_afastamento.data_fim }} | {{ obj.ultimo_afastamento.descricao }}">
                        {% if obj.ultimo_afastamento %}
                            {{ obj.ultimo_afastamento.data_inicio }} - {{ obj.ultimo_afastamento.data_fim }} | {{ obj.ultimo_afastamento.descricao }}
                        {% else %}
                            ---------
                        {% endif %}
                    </td>
                </tr>
            {% empty %}
                <tr>
                    <td colspan="50">Nenhum usuário encontrado</td>
                </tr>
            {% endfor %}
        </tbody>
    </table>
</div>

<div class="d-flex align-items-center justify-content-between mt-3">
  <div></div>
  {% include 'global/partials/pagination.html' %}
</div>

<script src="{% static 'js/draggable_table.js' %}"></script>